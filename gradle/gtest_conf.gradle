ext {
	gTestLinkerArgs = ['-pthread', '-v']
	gTestCompilerArgs = gTestLinkerArgs + [
		'-isystem', new File(rootDir, "googletest/googletest/include").path,
		'-isystem', new File(rootDir, "googletest/googlemock/include").path,
		'-ggdb',
	]
}

model {
	binaries {
		withType(GoogleTestTestSuiteBinarySpec) {
			lib project: ':googletest', library: 'main', linkage: 'static'
			cppCompiler.args(*gTestCompilerArgs)
			linker.args(*gTestLinkerArgs)
		}
	}
}